# Meson cross compilation file for the ATmega328P.
# Absolute paths point to the AVR-GCC toolchain binaries
# installed by `setup.sh`.  The flags are tuned for space
# constrained 16â€¯MHz Arduino Uno boards.

[binaries]
c = '/usr/bin/avr-gcc'
ar = '/usr/bin/avr-ar'
objcopy = '/usr/bin/avr-objcopy'
size = '/usr/bin/avr-size'
strip = '/usr/bin/avr-strip'

[properties]
needs_exe_wrapper = true

[built-in options]
# AVR firmware is not position independent
b_staticpic = false
## Optimization flags for minimal flash usage with LTO enabled
c_args = ['-mmcu=atmega328p', '-DF_CPU=16000000UL', '-Os', '-flto',
         '-ffunction-sections', '-fdata-sections']
c_link_args = ['-mmcu=atmega328p', '-Wl,--gc-sections', '-flto']

[host_machine]
system = 'baremetal'
cpu_family = 'avr'
cpu = 'atmega328p'
endian = 'little'
